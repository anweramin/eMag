<!DOCTYPE html>
<html>
<head>
<!-- 	<script src="/js/jquery-2.2.4.min.js"></script>
-->	
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script> 
<script src="js/jquery.gridster.min.js"></script>
<!-- <style  src="jquery.gridster.min.css" ></style>	
 -->
 <link rel="stylesheet" type="text/css" href="css/jquery.gridster.min.css">
  <link rel="stylesheet" type="text/css" href="css/demo.css">

<script type="text/javascript">
// 	$(document).ready(function($) {
// 	$(function(){ //DOM Ready

// 		$(".gridster ul").gridster({
// 			widget_margins: [10, 10],
// 			widget_base_dimensions: [140, 140]
// 		});
// 		$(function(){ //DOM Ready

// 			var gridster = $(".gridster ul").gridster().data('gridster');
// 			gridster.add_widget('<li class="new">The HTML of the widget...</li>', 2, 1);
// 		});


// 	});

// });
   $(function(){

      gridster = $(".gridster > ul").gridster({
          widget_margins: [5, 5],
          widget_base_dimensions: [100, 55],
          autogenerate_stylesheet: true,
          resize: {
            enabled: true
          }
      }).data('gridster');

      var widgets = [
          ['<li>0</li>', 1, 2],
          ['<li>1</li>', 3, 2],
          ['<li>2</li>', 3, 2],
          ['<div><h1>title</h1>Voluptate veniam exercitation magna nisi ex nulla do commodo consequat est laboris aute irure. Qui enim consequat nostrud aliqua non non sunt reprehenderit sit. Non labore nulla proident duis consectetur elit esse. In sit deserunt ex ipsum incididunt voluptate aliquip eu est fugiat commodo excepteur. Magna ad magna ex magna enim voluptate tempor elit minim nulla. Eu cupidatat ea elit esse incididunt adipisicing elit do esse nisi sint excepteur. Deserunt laboris in eu eu laborum anim proident mollit pariatur pariatur in elit ex consectetur.\n\nVoluptate adipisicing veniam tempor anim. Anim laborum laboris enim id quis proident ipsum tempor eiusmod irure sint sunt. Duis labore magna adipisicing dolore laborum eu eiusmod non eiusmod exercitation laboris. Anim consequat fugiat cillum eiusmod laboris nisi aute do mollit adipisicing ea adipisicing irure eu. Anim sunt qui enim occaecat sunt ex commodo esse.\n\nAdipisicing occaecat labore labore nostrud. Tempor cillum Lorem cillum officia labore nostrud incididunt duis ad do nostrud tempor consequat. Commodo ex anim officia nisi ex. In minim excepteur laborum incididunt ad irure. Ut laboris Lorem laboris pariatur reprehenderit nostrud enim exercitation Lorem ullamco adipisicing excepteur labore. Excepteur quis enim sit pariatur cupidatat nulla. Excepteur commodo elit adipisicing duis ea amet in.</div>', 2, 2],
          ['<li>4</li>', 4,2],
          ['<li>5</li>', 1, 2],
          ['<div><h1>title</h1>Voluptate veniam exercitation magna nisi ex nulla do commodo consequat est laboris aute irure. Qui enim consequat nostrud aliqua non non sunt reprehenderit sit. Non labore nulla proident duis consectetur elit esse. In sit deserunt ex ipsum incididunt voluptate aliquip eu est fugiat commodo excepteur. Magna ad magna ex magna enim voluptate tempor elit minim nulla. Eu cupidatat ea elit esse incididunt adipisicing elit do esse nisi sint excepteur. Deserunt laboris in eu eu laborum anim proident mollit pariatur pariatur in elit ex consectetur.\n\nVoluptate adipisicing veniam tempor anim. Anim laborum laboris enim id quis proident ipsum tempor eiusmod irure sint sunt. Duis labore magna adipisicing dolore laborum eu eiusmod non eiusmod exercitation laboris. Anim consequat fugiat cillum eiusmod laboris nisi aute do mollit adipisicing ea adipisicing irure eu. Anim sunt qui enim occaecat sunt ex commodo esse.\n\nAdipisicing occaecat labore labore nostrud. Tempor cillum Lorem cillum officia labore nostrud incididunt duis ad do nostrud tempor consequat. Commodo ex anim officia nisi ex. In minim excepteur laborum incididunt ad irure. Ut laboris Lorem laboris pariatur reprehenderit nostrud enim exercitation Lorem ullamco adipisicing excepteur labore. Excepteur quis enim sit pariatur cupidatat nulla. Excepteur commodo elit adipisicing duis ea amet in.</div>', 2, 1],
          ['<li>7</li>', 3, 2],
          ['<li>8</li>', 1, 1],
          ['<li>9</li>', 2, 2],
          ['<li>10</li>', 2, 3], 
          ['<div><h1>Award giving killer stricks again!</h1><h4>by Anwer Amin</h4><br><p><img src="newsimg.png"></p><br>This bearded werido is not your ordinary killer but the infamous Award killed. Known for his MO of leaving awards at the scenes of his crimes.Voluptate veniam exercitation magna nisi ex nulla do commodo consequat est laboris aute irure. Qui enim consequat nostrud aliqua non non sunt reprehenderit sit. Non labore nulla proident duis consectetur elit esse. In sit deserunt ex ipsum incididunt voluptate aliquip eu est fugiat commodo excepteur. Magna ad magna ex magna enim voluptate tempor elit minim nulla. Eu cupidatat ea elit esse incididunt adipisicing elit do esse nisi sint excepteur. Deserunt laboris in eu eu laborum anim proident mollit pariatur pariatur in elit ex consectetur.\n\nVoluptate adipisicing veniam tempor anim. Anim laborum laboris enim id quis proident ipsum tempor eiusmod irure sint sunt. Duis labore magna adipisicing dolore laborum eu eiusmod non eiusmod exercitation laboris. Anim consequat fugiat cillum eiusmod laboris nisi aute do mollit adipisicing ea adipisicing irure eu. Anim sunt qui enim occaecat sunt ex commodo esse.\n\n<br />Adipisicing occaecat labore labore nostrud. Tempor cillum Lorem cillum officia labore nostrud incididunt duis ad do nostrud tempor consequat. Commodo ex anim officia nisi ex. In minim excepteur laborum incididunt ad irure. Ut laboris Lorem laboris pariatur reprehenderit nostrud enim exercitation Lorem ullamco adipisicing excepteur labore. Excepteur quis enim sit pariatur cupidatat nulla. Excepteur commodo elit adipisicing duis ea amet in.</div>',4,12]
      ];

      $.each(widgets, function(i, widget){
          gridster.add_widget.apply(gridster, widget)
      });


      var result = gridster.serialize();
      console.log(result)


    
    });
</script>
<title></title>
</head>
<!-- <img src="newsimg.png">
 -->
<p><a class="btn btn-success" href="javascript:void(0);" onClick="generate();">Generate Screenshot &raquo;</a></p>
<body>

	<div class="gridster">
		<ul>
       <!--  <li data-row="1" data-col="1" data-sizex="1" data-sizey="1">asdasd</li>
        <li data-row="2" data-col="1" data-sizex="1" data-sizey="1">asdas</li>
        <li data-row="3" data-col="1" data-sizex="1" data-sizey="1">asdasdasdasda</li>

        <li data-row="1" data-col="2" data-sizex="2" data-sizey="1">asdasda</li>
        <li data-row="2" data-col="2" data-sizex="2" data-sizey="2">asdasd</li>

        <li data-row="1" data-col="4" data-sizex="1" data-sizey="1"></li>
        <li data-row="2" data-col="4" data-sizex="2" data-sizey="1"></li>
        <li data-row="3" data-col="4" data-sizex="1" data-sizey="1"></li>

        <li data-row="1" data-col="5" data-sizex="1" data-sizey="1"></li>
        <li data-row="3" data-col="5" data-sizex="1" data-sizey="1"></li>

        <li data-row="1" data-col="6" data-sizex="1" data-sizey="1"></li>
        <li data-row="2" data-col="6" data-sizex="1" data-sizey="2"></li> -->
    </ul>
</div>
<script type="text/javascript">
	(function (exports) {
    function urlsToAbsolute(nodeList) {
        if (!nodeList.length) {
            return [];
        }
        var attrName = 'href';
        if (nodeList[0].__proto__ === HTMLImageElement.prototype 
        || nodeList[0].__proto__ === HTMLScriptElement.prototype) {
            attrName = 'src';
        }
        nodeList = [].map.call(nodeList, function (el, i) {
            var attr = el.getAttribute(attrName);
            if (!attr) {
                return;
            }
            var absURL = /^(https?|data):/i.test(attr);
            if (absURL) {
                return el;
            } else {
                return el;
            }
        });
        return nodeList;
    }

    function screenshotPage() {
        urlsToAbsolute(document.images);
        urlsToAbsolute(document.querySelectorAll("link[rel='stylesheet']"));
        var screenshot = document.documentElement.cloneNode(true);
        var b = document.createElement('base');
        b.href = document.location.protocol + '//' + location.host;
        var head = screenshot.querySelector('head');
        head.insertBefore(b, head.firstChild);
        screenshot.style.pointerEvents = 'none';
        screenshot.style.overflow = 'hidden';
        screenshot.style.webkitUserSelect = 'none';
        screenshot.style.mozUserSelect = 'none';
        screenshot.style.msUserSelect = 'none';
        screenshot.style.oUserSelect = 'none';
        screenshot.style.userSelect = 'none';
        screenshot.dataset.scrollX = window.scrollX;
        screenshot.dataset.scrollY = window.scrollY;
        var script = document.createElement('script');
        script.textContent = '(' + addOnPageLoad_.toString() + ')();';
        screenshot.querySelector('body').appendChild(script);
        var blob = new Blob([screenshot.outerHTML], {
            type: 'text/html'
        });
        return blob;
    }

    function addOnPageLoad_() {
        window.addEventListener('DOMContentLoaded', function (e) {
            var scrollX = document.documentElement.dataset.scrollX || 0;
            var scrollY = document.documentElement.dataset.scrollY || 0;
            window.scrollTo(scrollX, scrollY);
        });
    }

    function generate() {
        window.URL = window.URL || window.webkitURL;
        window.open(window.URL.createObjectURL(screenshotPage()));
    }
    exports.screenshotPage = screenshotPage;
    exports.generate = generate;
})(window);
</script>
</body>
</html>